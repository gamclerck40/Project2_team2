<header style="
  background:#333; color:#fff;
  padding: 14px 20px;
  display:flex; align-items:center; justify-content:space-between;
">
  <!-- ë¡œê³  -->
  <h1 style="margin:0; font-size:24px; line-height:1;">
    <a href="{% url 'product_list' %}" style="color:#fff; text-decoration:none;">
      ğŸ›’
    </a>
  </h1>

  <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
  <nav style="display:flex; align-items:center; gap:16px; flex-wrap:wrap;">

    <!-- ê³µí†µ ë©”ë‰´ -->
    <a href="{% url 'product_list' %}" style="color:#fff; text-decoration:none; font-weight:700; opacity:.95;">
      ìƒí’ˆëª©ë¡
    </a>
    <a href="/admin/" style="color:#fff; text-decoration:none; font-weight:700; opacity:.95;">
      ê´€ë¦¬ì
    </a>

    {% if user.is_authenticated %}
      <!-- ë¡œê·¸ì¸ ì‹œì—ë§Œ ì¥ë°”êµ¬ë‹ˆ í‘œì‹œ -->
      <a href="{% url 'cart_list' %}" style="color:#fff; text-decoration:none; font-weight:700; opacity:.95;">
        ğŸ›’ ì¥ë°”êµ¬ë‹ˆ
      </a>

      <!-- âœ… [ì¶”ê°€] í˜ì´ì§€ ë·° í† ê¸€(ì¼ë°˜/ì»¨ì„¤íŒ…) -->
      <div style="
        display:flex; align-items:center; gap:10px;
        padding: 6px 10px;
        border-radius: 999px;
        border: 1px solid rgba(255,255,255,.25);
        background: rgba(255,255,255,.06);
      ">
        <span style="font-size:12px; font-weight:800; color:#ddd; white-space:nowrap;">ì¼ë°˜</span>

        <label style="position:relative; display:inline-block; width:44px; height:24px; margin:0; cursor:pointer;">
          <input id="shop-view-toggle" type="checkbox"
            {% if '/shop/consulting' in request.path %}checked{% endif %}
            style="opacity:0; width:0; height:0;">
          <span style="
            position:absolute; inset:0;
            background: rgba(255,255,255,.18);
            border-radius: 999px;
            transition: .2s;
          "></span>
          <span id="shop-view-knob" style="
            position:absolute; left:3px; top:3px;
            width:18px; height:18px;
            background: #fff;
            border-radius: 999px;
            transition: .2s;
            box-shadow: 0 2px 6px rgba(0,0,0,.35);
          "></span>
        </label>

        <span style="font-size:12px; font-weight:900; color:#fff; white-space:nowrap;">ì»¨ì„¤íŒ…</span>
      </div>
      <!-- âœ… [ì¶”ê°€ ë] -->
    {% endif %}

    <!-- êµ¬ë¶„ì„  -->
    <span style="width:1px; height:18px; background: rgba(255,255,255,.25);"></span>

    {% if user.is_authenticated %}
      <!-- ë¡œê·¸ì¸ ìƒíƒœ -->
      <span style="color:#ddd; font-size:14px; white-space:nowrap;">
        ì•ˆë…•í•˜ì„¸ìš”, <b style="color:#fff;">{{ user.username }}</b>ë‹˜
      </span>

      <div style="display:flex; align-items:center; gap:12px;">
        <!-- ë¡œê·¸ì•„ì›ƒ (POST ìœ ì§€) -->
        <form method="post" action="{% url 'logout' %}" style="margin:0;">
          {% csrf_token %}
          <button type="submit" style="
            background: transparent;
            border: 1px solid rgba(255,255,255,.25);
            color:#fff;
            padding: 7px 10px;
            border-radius: 10px;
            cursor:pointer;
            font-weight:800;
            font-size:13px;
          ">
            ë¡œê·¸ì•„ì›ƒ
          </button>
        </form>
         <a href="{% url 'register_coupon' %}" style="
        color:#fff;
        text-decoration:none;
        font-weight:800;
        font-size:13px;
        padding: 7px 10px;
        border-radius: 10px;
        background: rgba(255, 193, 7, 0.2); /* ì€ì€í•œ ê°•ì¡°ìƒ‰(ë…¸ë€ìƒ‰ ê³„ì—´) */
        border: 1px solid rgba(255, 193, 7, 0.3);
    ">
        ğŸŸï¸ ì¿ í°ë“±ë¡
        </a>


        <a href="{% url 'transaction_history' %}" style="
          color:#bbb;
          text-decoration:none;
          font-weight:800;
          font-size:13px;
          padding: 7px 10px;
          border-radius: 10px;
          border: 1px solid rgba(255,255,255,.25);
        ">
          ê±°ë˜ ë‚´ì—­
        </a>
        <a href="{% url 'mypage' %}" style="
          color:#bbb;
          text-decoration:none;
          font-weight:800;
          font-size:13px;
          padding: 7px 10px;
          border-radius: 10px;
          border: 1px solid rgba(255,255,255,.18);
        ">
          ë‚´ ì •ë³´
        </a>
      </div>

    {% else %}
      <!-- ë¹„ë¡œê·¸ì¸ ìƒíƒœ -->
      <div style="display:flex; align-items:center; gap:12px;">
        <a href="{% url 'login' %}" style="
          color:#bbb;
          text-decoration:none;
          font-weight:800;
          font-size:13px;
          padding: 7px 10px;
          border-radius: 10px;
          border: 1px solid rgba(255,255,255,.18);
        ">
          ë¡œê·¸ì¸
        </a>
        <a href="{% url 'account_signup' %}" style="
          color:#fff;
          text-decoration:none;
          font-weight:900;
          font-size:13px;
          padding: 7px 12px;
          border-radius: 10px;
          background: rgba(255,255,255,.12);
          border: 1px solid rgba(255,255,255,.18);
        ">
          íšŒì›ê°€ì…
        </a>
      </div>
    {% endif %}

  </nav>

  <!-- âœ… í† ê¸€ ë™ì‘ìš© ìŠ¤í¬ë¦½íŠ¸(í—¤ë” í†¤ ìœ ì§€, ê¸°ëŠ¥ë§Œ ì¶”ê°€) -->
<script>
  (function () {
    const toggle = document.getElementById("shop-view-toggle");
    const knob = document.getElementById("shop-view-knob");
    if (!toggle || !knob) return;

    function syncKnob() {
      knob.style.transform = toggle.checked ? "translateX(20px)" : "translateX(0)";
    }
    syncKnob();

    toggle.addEventListener("change", function () {
      const normalUrl = "{% url 'product_list' %}";
      const consultingUrl = "{% url 'product_consulting_list' %}";
      const targetUrl = toggle.checked ? consultingUrl : normalUrl;

      // âœ… ì´ë™ ì „ì— í˜„ì¬ í˜ì´ì§€ì—ì„œ "ë¶€ë“œëŸ½ê²Œ" í…Œë§ˆ ì „í™˜ ëŠë‚Œ ë³´ì—¬ì£¼ê¸°
      document.body.classList.toggle("consulting-mode", toggle.checked);

      // ì‚´ì§ ë”œë ˆì´ í›„ ì´ë™ (ì „í™˜ ëŠë‚Œ)
      setTimeout(function () {
        window.location.href = targetUrl;
      }, 220);
    });
  })();
</script>

</header>
