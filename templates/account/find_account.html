{% extends "base.html" %}
{% block content %}

<style>
  .findWrap { max-width: 520px; margin: 40px auto; }
  .findCard {
    background: #fff; border-radius: 20px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    overflow: hidden; border: 1px solid #eee;
  }
  .findHeader { background: #333; color: #fff; padding: 18px 22px; font-weight: 900; font-size: 18px; }
  .findBody { padding: 22px; }

  .tabRow { display: flex; gap: 10px; margin-bottom: 18px; }
  .tabBtn {
    flex: 1; text-align: center; padding: 12px; border-radius: 14px;
    font-weight: 900; text-decoration: none;
    border: 1px solid #ddd; background: #fff; color: #333;
  }
  .tabBtnActive { background: #333; color: #fff; border-color: #333; }

  /* â— ì¤‘ë³µ íƒ­ ìˆ¨ê¹€ */
  .tabRowDup { display: none; }

  .infoBox {
    padding: 14px 16px; border-radius: 14px; margin-bottom: 16px;
    font-weight: 700; line-height: 1.5;
  }
  .infoBlue { background: #eef6ff; border: 1px solid #cfe6ff; color: #1f5ea8; }
  .infoGreen { background: #e9f7ef; border: 1px solid #cfead8; color: #1e7a3a; }

  .formGroup { margin-bottom: 14px; }
  .formLabel { font-weight: 800; margin-bottom: 6px; color: #333; }

  /* input/select/textarea ì „ë¶€ ê°™ì€ í†¤ìœ¼ë¡œ */
  .findBody input,
  .findBody select,
  .findBody textarea {
    width: 100%;
    padding: 12px;
    border: 1px solid #ddd;
    border-radius: 14px;
    font-size: 14px;
    box-sizing: border-box;
  }

  .formBtn {
    width: 100%; padding: 14px; background: #333; color: #fff;
    border: none; border-radius: 14px; font-weight: 900; cursor: pointer;
    margin-top: 6px;
  }
</style>

<div class="findWrap">
  <div class="findCard">
    <div class="findHeader">ğŸ” ID / ë¹„ë°€ë²ˆí˜¸ ì°¾ê¸°</div>

    <div class="findBody">

      <!-- ë©”ì¸ íƒ­ -->
      <div class="tabRow">
        <a href="?tab=id" class="tabBtn {% if tab == 'id' %}tabBtnActive{% endif %}">ID ì°¾ê¸°</a>
        <a href="?tab=pw" class="tabBtn {% if tab == 'pw' %}tabBtnActive{% endif %}">PW ì°¾ê¸°</a>
      </div>

      <!-- ID ì°¾ê¸° -->
      {% if tab == "id" %}
        <form method="post">
          {% csrf_token %}
          <input type="hidden" name="tab" value="id">

          <div class="formGroup">
            <div class="formLabel">{{ id_form.phone.label }}</div>
            {{ id_form.phone }}
          </div>

          <button class="formBtn">ID ì°¾ê¸°</button>
        </form>
      {% endif %}

      <!-- PW ì°¾ê¸° -->
      {% if tab == "pw" %}

        <!-- â— ì¤‘ë³µ íƒ­ (ìˆ¨ê¹€ ì²˜ë¦¬ë¨) -->
        <div class="tabRow tabRowDup">
          <a href="{% url 'find_account' %}?tab=id" class="tabBtn {% if tab == 'id' %}tabBtnActive{% endif %}">ID ì°¾ê¸°</a>
          <a href="{% url 'find_account' %}?tab=pw" class="tabBtn {% if tab == 'pw' %}tabBtnActive{% endif %}">PW ì°¾ê¸°</a>
        </div>

        {% if not reset_verified %}
          <div class="infoBox infoBlue">
            ë¹„ë°€ë²ˆí˜¸ë¥¼ ì¬ì„¤ì •í•˜ë ¤ë©´ ë³¸ì¸ í™•ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤.<br>
            (ì•„ì´ë”” / ì´ë¦„ / ê³„ì¢Œë²ˆí˜¸)
          </div>

          <form method="post" action="{% url 'pw_reset_verify' %}">
            {% csrf_token %}

            <div class="formGroup">
              <div class="formLabel">ì•„ì´ë””</div>
              <input name="username" placeholder="ì•„ì´ë””">
            </div>

            <div class="formGroup">
              <div class="formLabel">ì´ë¦„ (ì˜ˆê¸ˆì£¼ëª…)</div>
              <input name="name" placeholder="ì´ë¦„">
            </div>

            <div class="formGroup">
              <div class="formLabel">ê³„ì¢Œë²ˆí˜¸</div>
              <input name="account_number" placeholder="ìˆ«ìë§Œ ì…ë ¥">
            </div>

            <button class="formBtn">ë³¸ì¸ í™•ì¸</button>
          </form>

        {% else %}
          <div class="infoBox infoGreen">
            ë³¸ì¸ í™•ì¸ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.<br>
            ìƒˆ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì„¤ì •í•´ ì£¼ì„¸ìš”.
          </div>

          <form method="post" action="{% url 'pw_reset_set' %}">
            {% csrf_token %}

            <div class="formGroup">
              <div class="formLabel">ìƒˆ ë¹„ë°€ë²ˆí˜¸</div>
              <input type="password" name="new_password1" autocomplete="new-password">
            </div>

            <div class="formGroup">
              <div class="formLabel">ìƒˆ ë¹„ë°€ë²ˆí˜¸ í™•ì¸</div>
              <input type="password" name="new_password2" autocomplete="new-password">
            </div>

            <button class="formBtn">ë¹„ë°€ë²ˆí˜¸ ë³€ê²½</button>
          </form>
        {% endif %}

      {% endif %}

    </div>
  </div>
</div>

{% endblock %}