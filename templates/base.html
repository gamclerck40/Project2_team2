{% load static %}
<!doctype html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}ìš°ë¦¬ ê°€ê²Œ{% endblock %}</title>
    
    <link rel="stylesheet" href="{% static 'base/css/base.css' %}">
    
    {% block extra_css %}{% endblock %}
</head>

<body class="{% if '/shop/consulting' in request.path %}consulting-mode{% endif %}">
    
    {% include 'header.html' %}

    {% if messages %}
    <div class="msg-container">
        {% for message in messages %}
            <div class="msg-item {% if message.tags == 'success' %}msg-success{% elif message.tags == 'warning' %}msg-warning{% endif %}">
                {{ message }}
            </div>
        {% endfor %}
    </div>
    {% endif %}

    <main class="container main-content">
        {% block content %}
        {% endblock %}
    </main> 

    <div id="recharge-modal" class="modal-overlay">
        <div class="modal-content">
            <h3 class="modal-title">ğŸ¦ ê³„ì¢Œ ì¶©ì „</h3>
            <p class="modal-description">ì¶©ì „í•  ê¸ˆì•¡ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.</p>
            
            <form method="post" action="{% url 'charge_balance' %}">
                {% csrf_token %}
                <input type="hidden" name="next" value="{{ request.get_full_path }}">
                
                {# ë¡œê·¸ì¸ ìƒíƒœ í™•ì¸ í›„ ê³„ì¢Œ ID ìë™ ì…ë ¥ #}
                {% if user.is_authenticated %}
                {% with acc=account|default:user.accounts.first %}
                <input type="hidden" name="account_id" value="{% if acc %}{{ acc.id }}{% endif %}">
                {% endwith %}
                {% else %}
                <input type="hidden" name="account_id" value="">
                {% endif %}
                
                <input type="number" name="amount" placeholder="ê¸ˆì•¡ ì…ë ¥" required class="modal-input">                 
                
                <div class="modal-btn-group">
                    <a href="#" class="btn-cancel">ì·¨ì†Œ</a>
                    <button type="submit" class="btn-charge">ì¶©ì „í•˜ê¸°</button>
                </div>
            </form>
        </div>
    </div>
    {% include 'footer.html' %}
    {% block extra_js %}{% endblock %}
</body>
</html>